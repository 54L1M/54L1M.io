<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Why Nix and nix-darwin Are Great for macOS | 54L1M</title>
<meta name=keywords content="nix,nix-darwin,macOS,dev-tools,unstable-branch,configuration"><meta name=description content="Learn why Nix and nix-darwin are powerful tools for macOS development and how I use them to streamline my workflow."><meta name=author content="Salim"><link rel=canonical href=https://54L1M.io/posts/nix/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://54L1M.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://54L1M.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://54L1M.io/favicon-32x32.png><link rel=apple-touch-icon href=https://54L1M.io/apple-touch-icon.png><link rel=mask-icon href=https://54L1M.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://54L1M.io/posts/nix/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://54L1M.io/posts/nix/"><meta property="og:site_name" content="54L1M"><meta property="og:title" content="Why Nix and nix-darwin Are Great for macOS"><meta property="og:description" content="Learn why Nix and nix-darwin are powerful tools for macOS development and how I use them to streamline my workflow."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-24T00:00:00+00:00"><meta property="article:modified_time" content="2024-12-24T00:00:00+00:00"><meta property="article:tag" content="Nix"><meta property="article:tag" content="Nix-Darwin"><meta property="article:tag" content="MacOS"><meta property="article:tag" content="Dev-Tools"><meta property="article:tag" content="Unstable-Branch"><meta property="article:tag" content="Configuration"><meta name=twitter:card content="summary"><meta name=twitter:title content="Why Nix and nix-darwin Are Great for macOS"><meta name=twitter:description content="Learn why Nix and nix-darwin are powerful tools for macOS development and how I use them to streamline my workflow."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://54L1M.io/posts/"},{"@type":"ListItem","position":2,"name":"Why Nix and nix-darwin Are Great for macOS","item":"https://54L1M.io/posts/nix/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Why Nix and nix-darwin Are Great for macOS","name":"Why Nix and nix-darwin Are Great for macOS","description":"Learn why Nix and nix-darwin are powerful tools for macOS development and how I use them to streamline my workflow.","keywords":["nix","nix-darwin","macOS","dev-tools","unstable-branch","configuration"],"articleBody":"As a macOS user and developer, finding a robust, flexible, and reproducible way to manage system configurations and development environments has always been a challenge. While macOS is a great platform for development, its native tools can sometimes feel limiting in terms of flexibility, especially when compared to Linux-based systems.\nThis is where Nix and nix-darwin come in. These tools allow you to manage macOS system configurations and software installations declaratively and reproducibly, ensuring consistency across multiple devices or even between different points in time.\nP.S. You can find my complete configuration on GitHub. Feel free to explore and use it!\nWhy Nix? Declarative System Management Nix is a package manager and build system that operates on the principle of declarative configuration. Instead of manually installing and configuring software, you describe your desired system state in a configuration file. This makes it easy to reproduce an exact environment across machines.\nThis approach is particularly helpful for developers who need to work on multiple devices or collaborate in teams. With Nix, there’s no need to document a series of manual steps—your configuration file serves as a single source of truth. For example, installing packages or defining environment variables becomes as simple as editing your configuration file.\nReproducibility The primary benefit of Nix’s declarative approach is reproducibility. If you describe your system with a configuration file, you can recreate it exactly, no matter where or when. This is a game-changer for maintaining development environments across different machines or even across different points in time.\nImagine this scenario: your primary development machine crashes, and you’re left with a blank replacement device. With Nix, you don’t need to manually reinstall software, recreate your custom setups, or remember every tweak you made to the system. Simply apply your configuration file, and your environment is back—exactly as it was before.\nRollbacks and Version Control Another unique feature of Nix is the ability to rollback changes. Every change you make to your environment is essentially a new version. If you add or update a package and it breaks something, you can quickly revert to a previously working state. This version-control-like behavior makes experimentation safer, encouraging you to try new tools or configurations without fear of irreparable damage.\nIn practice, this means that even if a package update introduces a bug, your entire system remains stable. Rolling back takes seconds, and you can even toggle between configurations to test different setups.\nFlexibility and Customizability One of the reasons Nix is so beloved by developers is its flexibility. Every aspect of your system can be customized, from environment variables to the specific versions of software you want to use. Want to test an older version of Python or a nightly build of a cutting-edge tool? Nix makes it easy to isolate these environments without impacting the rest of your system.\nFor macOS users, Nix also bridges the gap between Linux and macOS development, allowing for shared configurations and a more seamless workflow between platforms.\nWhy Use Nix on macOS? While macOS is developer-friendly, it doesn’t have the package management sophistication of Linux distributions. Homebrew is a popular choice for macOS package management, but it lacks the declarative, reproducible, and rollback features that Nix offers.\nWith nix-darwin, macOS users can enjoy the same declarative system management as NixOS, including:\nManaging macOS preferences (e.g., Dock auto-hide, Finder view style).\nInstalling macOS applications alongside Unix tools.\nCreating a fully reproducible macOS environment for development.\nWhat is the Unstable Branch of Nix? The unstable branch of Nix, known as nixpkgs-unstable, is the cutting-edge version of the Nix package collection. It contains the latest versions of packages and system improvements. By using this branch, you gain access to:\nThe Latest Features and Tools: Cutting-edge tools and libraries are available as soon as they’re introduced.\nFrequent Updates: Since the branch is regularly updated, you’ll always have access to the latest versions of your favorite tools.\nCommunity Contributions: Many new packages and features are added to the unstable branch by contributors before they’re integrated into the stable release.\nTrade-offs of Using the Unstable Branch While the unstable branch provides the latest updates, it may also introduce occasional bugs or backward compatibility issues. For developers who rely on bleeding-edge tools, these risks are often outweighed by the benefits. However, for production systems or environments where stability is critical, the stable branch might be more appropriate.\nIn my workflow, the unstable branch ensures I have access to the newest versions of development tools, which helps me stay up to date in fast-paced projects.\nUpdating and Building with nix-darwin Using nix-darwin requires a few simple commands to keep your system updated and apply configuration changes.\nUpdate the Nix Flake Inputs To ensure your flake inputs (like nixpkgs and nix-darwin) are up to date, use:\nnix flake update This command updates all dependencies defined in your flake.nix file to their latest versions. After updating, you can rebuild your system to apply any changes.\nRebuild the System Configuration Once you’ve updated your flake inputs or made changes to your configuration, you can rebuild your system with:\ndarwin-rebuild switch --flake .# Replace with the name of your configuration, as defined in your flake.nix. For example, if your configuration is named 54L1M, you’d run:\ndarwin-rebuild switch --flake .#54L1M This command applies your configuration changes immediately, including updating installed packages, applying macOS preferences, and restarting necessary services.\nTest Changes Safely If you’re testing changes and don’t want to apply them immediately, use the build command instead:\ndarwin-rebuild build --flake .#54L1M This creates a build of your configuration without applying it. Once you’re confident in the changes, you can switch to the new configuration.\nMy nix-darwin Configuration Below is an excerpt of my nix-darwin configuration, which is also available on GitHub.\nOverview This configuration manages:\nSystem-level packages like neovim, git, and rustup.\nmacOS applications like Spotify, Firefox, and Obsidian.\nmacOS preferences like enabling dark mode and configuring the Dock.\nFull Configuration { description = \"54L1M Darwin system flake\"; inputs = { nixpkgs.url = \"github:NixOS/nixpkgs/nixpkgs-unstable\"; nix-darwin.url = \"github:LnL7/nix-darwin\"; nix-darwin.inputs.nixpkgs.follows = \"nixpkgs\"; nix-homebrew.url = \"github:zhaofengli-wip/nix-homebrew\"; }; outputs = inputs@{ self, nix-darwin, nixpkgs, nix-homebrew }: let configuration = { pkgs,config, ... }: { nixpkgs.config.allowUnfree = true; environment.systemPackages = with pkgs; [ alacritty neovim git tmux ripgrep python313 ... ]; homebrew = { enable = true; brews = [ \"mas\" \"hugo\" ... ]; casks = [ \"firefox\" ... ]; }; fonts.packages = [ pkgs.nerd-fonts.jetbrains-mono ]; nix.settings.experimental-features = \"nix-command flakes\"; programs.zsh.enable = true; }; in { darwinConfigurations.\"54L1M \" = nix-darwin.lib.darwinSystem { modules = [ configuration ]; }; }; } Conclusion Incorporating Nix and nix-darwin into my workflow has been transformative. The declarative and reproducible nature of Nix ensures that my development environment is consistent, reliable, and easy to manage. Using the unstable branch allows me to stay on the cutting edge of technology, which is crucial for my development needs.\nIf you’re a macOS user looking for a powerful alternative to traditional package managers, I highly recommend giving Nix and nix-darwin a try. For more details, feel free to check out my full configuration on GitHub.\nHappy hacking! 🚀\n","wordCount":"1180","inLanguage":"en","datePublished":"2024-12-24T00:00:00Z","dateModified":"2024-12-24T00:00:00Z","author":{"@type":"Person","name":"Salim"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://54L1M.io/posts/nix/"},"publisher":{"@type":"Organization","name":"54L1M","logo":{"@type":"ImageObject","url":"https://54L1M.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://54L1M.io/ accesskey=h title="54L1M (Alt + H)">54L1M</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://54L1M.io/about/ title=About><span>About</span></a></li><li><a href=https://54L1M.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://54L1M.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://54L1M.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://54L1M.io/archives/ title=Archives><span>Archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://54L1M.io/>Home</a>&nbsp;»&nbsp;<a href=https://54L1M.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Why Nix and nix-darwin Are Great for macOS</h1><div class=post-meta><span title='2024-12-24 00:00:00 +0000 UTC'>December 24, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1180 words&nbsp;·&nbsp;Salim&nbsp;|&nbsp;<a href=https://github.com/54L1M/54L1M.io/tree/master/content/posts/Nix.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#why-nix>Why Nix?</a><ul><li><a href=#declarative-system-management>Declarative System Management</a></li><li><a href=#reproducibility>Reproducibility</a></li><li><a href=#rollbacks-and-version-control>Rollbacks and Version Control</a></li><li><a href=#flexibility-and-customizability>Flexibility and Customizability</a></li></ul></li><li><a href=#why-use-nix-on-macos>Why Use Nix on macOS?</a></li><li><a href=#what-is-the-unstable-branch-of-nix>What is the Unstable Branch of Nix?</a><ul><li><a href=#trade-offs-of-using-the-unstable-branch>Trade-offs of Using the Unstable Branch</a></li></ul></li><li><a href=#updating-and-building-with-nix-darwin>Updating and Building with nix-darwin</a><ul><li><a href=#update-the-nix-flake-inputs>Update the Nix Flake Inputs</a></li><li><a href=#rebuild-the-system-configuration>Rebuild the System Configuration</a></li><li><a href=#test-changes-safely>Test Changes Safely</a></li></ul></li><li><a href=#my-nix-darwin-configuration>My nix-darwin Configuration</a><ul><li><a href=#overview>Overview</a></li><li><a href=#full-configuration>Full Configuration</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>As a macOS user and developer, finding a robust, flexible, and reproducible way to manage system configurations and development environments has always been a challenge. While macOS is a great platform for development, its native tools can sometimes feel limiting in terms of flexibility, especially when compared to Linux-based systems.</p><p>This is where <strong>Nix</strong> and <strong>nix-darwin</strong> come in. These tools allow you to manage macOS system configurations and software installations declaratively and reproducibly, ensuring consistency across multiple devices or even between different points in time.</p><p><strong>P.S.</strong> You can find my complete configuration on <a href=https://github.com/54L1M/shenfiles/tree/master/nix>GitHub</a>. Feel free to explore and use it!</p><hr><h2 id=why-nix>Why Nix?<a hidden class=anchor aria-hidden=true href=#why-nix>#</a></h2><h3 id=declarative-system-management>Declarative System Management<a hidden class=anchor aria-hidden=true href=#declarative-system-management>#</a></h3><p>Nix is a package manager and build system that operates on the principle of <strong>declarative configuration</strong>. Instead of manually installing and configuring software, you describe your desired system state in a configuration file. This makes it easy to reproduce an exact environment across machines.</p><p>This approach is particularly helpful for developers who need to work on multiple devices or collaborate in teams. With Nix, there’s no need to document a series of manual steps—your configuration file serves as a single source of truth. For example, installing packages or defining environment variables becomes as simple as editing your configuration file.</p><h3 id=reproducibility>Reproducibility<a hidden class=anchor aria-hidden=true href=#reproducibility>#</a></h3><p>The primary benefit of Nix’s declarative approach is <strong>reproducibility</strong>. If you describe your system with a configuration file, you can recreate it exactly, no matter where or when. This is a game-changer for maintaining development environments across different machines or even across different points in time.</p><p>Imagine this scenario: your primary development machine crashes, and you’re left with a blank replacement device. With Nix, you don’t need to manually reinstall software, recreate your custom setups, or remember every tweak you made to the system. Simply apply your configuration file, and your environment is back—exactly as it was before.</p><h3 id=rollbacks-and-version-control>Rollbacks and Version Control<a hidden class=anchor aria-hidden=true href=#rollbacks-and-version-control>#</a></h3><p>Another unique feature of Nix is the ability to <strong>rollback</strong> changes. Every change you make to your environment is essentially a new version. If you add or update a package and it breaks something, you can quickly revert to a previously working state. This version-control-like behavior makes experimentation safer, encouraging you to try new tools or configurations without fear of irreparable damage.</p><p>In practice, this means that even if a package update introduces a bug, your entire system remains stable. Rolling back takes seconds, and you can even toggle between configurations to test different setups.</p><h3 id=flexibility-and-customizability>Flexibility and Customizability<a hidden class=anchor aria-hidden=true href=#flexibility-and-customizability>#</a></h3><p>One of the reasons Nix is so beloved by developers is its <strong>flexibility</strong>. Every aspect of your system can be customized, from environment variables to the specific versions of software you want to use. Want to test an older version of Python or a nightly build of a cutting-edge tool? Nix makes it easy to isolate these environments without impacting the rest of your system.</p><p>For macOS users, Nix also bridges the gap between Linux and macOS development, allowing for shared configurations and a more seamless workflow between platforms.</p><hr><h2 id=why-use-nix-on-macos>Why Use Nix on macOS?<a hidden class=anchor aria-hidden=true href=#why-use-nix-on-macos>#</a></h2><p>While macOS is developer-friendly, it doesn’t have the package management sophistication of Linux distributions. Homebrew is a popular choice for macOS package management, but it lacks the declarative, reproducible, and rollback features that Nix offers.</p><p>With <strong>nix-darwin</strong>, macOS users can enjoy the same declarative system management as NixOS, including:</p><ul><li><p>Managing macOS preferences (e.g., Dock auto-hide, Finder view style).</p></li><li><p>Installing macOS applications alongside Unix tools.</p></li><li><p>Creating a fully reproducible macOS environment for development.</p></li></ul><hr><h2 id=what-is-the-unstable-branch-of-nix>What is the Unstable Branch of Nix?<a hidden class=anchor aria-hidden=true href=#what-is-the-unstable-branch-of-nix>#</a></h2><p>The <strong>unstable branch</strong> of Nix, known as <code>nixpkgs-unstable</code>, is the cutting-edge version of the Nix package collection. It contains the latest versions of packages and system improvements. By using this branch, you gain access to:</p><ul><li><p><strong>The Latest Features and Tools</strong>: Cutting-edge tools and libraries are available as soon as they’re introduced.</p></li><li><p><strong>Frequent Updates</strong>: Since the branch is regularly updated, you’ll always have access to the latest versions of your favorite tools.</p></li><li><p><strong>Community Contributions</strong>: Many new packages and features are added to the unstable branch by contributors before they’re integrated into the stable release.</p></li></ul><h3 id=trade-offs-of-using-the-unstable-branch>Trade-offs of Using the Unstable Branch<a hidden class=anchor aria-hidden=true href=#trade-offs-of-using-the-unstable-branch>#</a></h3><p>While the unstable branch provides the latest updates, it may also introduce occasional bugs or backward compatibility issues. For developers who rely on bleeding-edge tools, these risks are often outweighed by the benefits. However, for production systems or environments where stability is critical, the stable branch might be more appropriate.</p><p>In my workflow, the unstable branch ensures I have access to the newest versions of development tools, which helps me stay up to date in fast-paced projects.</p><hr><h2 id=updating-and-building-with-nix-darwin>Updating and Building with nix-darwin<a hidden class=anchor aria-hidden=true href=#updating-and-building-with-nix-darwin>#</a></h2><p>Using <strong>nix-darwin</strong> requires a few simple commands to keep your system updated and apply configuration changes.</p><h3 id=update-the-nix-flake-inputs>Update the Nix Flake Inputs<a hidden class=anchor aria-hidden=true href=#update-the-nix-flake-inputs>#</a></h3><p>To ensure your flake inputs (like <code>nixpkgs</code> and <code>nix-darwin</code>) are up to date, use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nix flake update
</span></span></code></pre></div><p>This command updates all dependencies defined in your <code>flake.nix</code> file to their latest versions. After updating, you can rebuild your system to apply any changes.</p><h3 id=rebuild-the-system-configuration>Rebuild the System Configuration<a hidden class=anchor aria-hidden=true href=#rebuild-the-system-configuration>#</a></h3><p>Once you’ve updated your flake inputs or made changes to your configuration, you can rebuild your system with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>darwin-rebuild switch --flake .#&lt;hostname&gt;
</span></span></code></pre></div><p>Replace <code>&lt;hostname></code> with the name of your configuration, as defined in your <code>flake.nix</code>. For example, if your configuration is named <code>54L1M</code>, you’d run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>darwin-rebuild switch --flake .#54L1M
</span></span></code></pre></div><p>This command applies your configuration changes immediately, including updating installed packages, applying macOS preferences, and restarting necessary services.</p><h3 id=test-changes-safely>Test Changes Safely<a hidden class=anchor aria-hidden=true href=#test-changes-safely>#</a></h3><p>If you’re testing changes and don’t want to apply them immediately, use the <code>build</code> command instead:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>darwin-rebuild build --flake .#54L1M
</span></span></code></pre></div><p>This creates a build of your configuration without applying it. Once you’re confident in the changes, you can switch to the new configuration.</p><hr><h2 id=my-nix-darwin-configuration>My nix-darwin Configuration<a hidden class=anchor aria-hidden=true href=#my-nix-darwin-configuration>#</a></h2><p>Below is an excerpt of my <strong>nix-darwin</strong> configuration, which is also available on <a href=https://github.com/54L1M/shenfiles/tree/master/nix>GitHub</a>.</p><h3 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h3><p>This configuration manages:</p><ul><li><p>System-level packages like <code>neovim</code>, <code>git</code>, and <code>rustup</code>.</p></li><li><p>macOS applications like <code>Spotify</code>, <code>Firefox</code>, and <code>Obsidian</code>.</p></li><li><p>macOS preferences like enabling dark mode and configuring the Dock.</p></li></ul><h3 id=full-configuration>Full Configuration<a hidden class=anchor aria-hidden=true href=#full-configuration>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-nix data-lang=nix><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>description</span> <span class=o>=</span> <span class=s2>&#34;54L1M Darwin system flake&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>inputs</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>nixpkgs</span><span class=o>.</span><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;github:NixOS/nixpkgs/nixpkgs-unstable&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>nix-darwin</span><span class=o>.</span><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;github:LnL7/nix-darwin&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>nix-darwin</span><span class=o>.</span><span class=n>inputs</span><span class=o>.</span><span class=n>nixpkgs</span><span class=o>.</span><span class=n>follows</span> <span class=o>=</span> <span class=s2>&#34;nixpkgs&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>nix-homebrew</span><span class=o>.</span><span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;github:zhaofengli-wip/nix-homebrew&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>outputs</span> <span class=o>=</span> <span class=n>inputs</span><span class=o>@</span><span class=p>{</span> <span class=n>self</span><span class=o>,</span> <span class=n>nix-darwin</span><span class=o>,</span> <span class=n>nixpkgs</span><span class=o>,</span> <span class=n>nix-homebrew</span> <span class=p>}:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span>
</span></span><span class=line><span class=cl>      <span class=n>configuration</span> <span class=o>=</span> <span class=p>{</span> <span class=n>pkgs</span><span class=o>,</span><span class=n>config</span><span class=o>,</span> <span class=o>...</span> <span class=p>}:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>nixpkgs</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>allowUnfree</span> <span class=o>=</span> <span class=no>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>environment</span><span class=o>.</span><span class=n>systemPackages</span> <span class=o>=</span> <span class=k>with</span> <span class=n>pkgs</span><span class=p>;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=n>alacritty</span>
</span></span><span class=line><span class=cl>          <span class=n>neovim</span>
</span></span><span class=line><span class=cl>          <span class=n>git</span>
</span></span><span class=line><span class=cl>          <span class=n>tmux</span>
</span></span><span class=line><span class=cl>          <span class=n>ripgrep</span>
</span></span><span class=line><span class=cl>          <span class=n>python313</span>
</span></span><span class=line><span class=cl>          <span class=o>...</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>homebrew</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>enable</span> <span class=o>=</span> <span class=no>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=n>brews</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;mas&#34;</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;hugo&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span>
</span></span><span class=line><span class=cl>          <span class=p>];</span>
</span></span><span class=line><span class=cl>          <span class=n>casks</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;firefox&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>...</span>
</span></span><span class=line><span class=cl>          <span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=n>fonts</span><span class=o>.</span><span class=n>packages</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=n>pkgs</span><span class=o>.</span><span class=n>nerd-fonts</span><span class=o>.</span><span class=n>jetbrains-mono</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>nix</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>experimental-features</span> <span class=o>=</span> <span class=s2>&#34;nix-command flakes&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>programs</span><span class=o>.</span><span class=n>zsh</span><span class=o>.</span><span class=n>enable</span> <span class=o>=</span> <span class=no>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=k>in</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>darwinConfigurations</span><span class=o>.</span><span class=s2>&#34;54L1M &#34;</span> <span class=o>=</span> <span class=n>nix-darwin</span><span class=o>.</span><span class=n>lib</span><span class=o>.</span><span class=n>darwinSystem</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>modules</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=n>configuration</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><hr><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>Incorporating <strong>Nix</strong> and <strong>nix-darwin</strong> into my workflow has been transformative. The declarative and reproducible nature of Nix ensures that my development environment is consistent, reliable, and easy to manage. Using the <strong>unstable branch</strong> allows me to stay on the cutting edge of technology, which is crucial for my development needs.</p><p>If you’re a macOS user looking for a powerful alternative to traditional package managers, I highly recommend giving Nix and nix-darwin a try. For more details, feel free to check out my full configuration on <a href=https://github.com/54L1M/shenfiles/tree/master/nix>GitHub</a>.</p><p>Happy hacking! 🚀</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://54L1M.io/tags/nix/>Nix</a></li><li><a href=https://54L1M.io/tags/nix-darwin/>Nix-Darwin</a></li><li><a href=https://54L1M.io/tags/macos/>MacOS</a></li><li><a href=https://54L1M.io/tags/dev-tools/>Dev-Tools</a></li><li><a href=https://54L1M.io/tags/unstable-branch/>Unstable-Branch</a></li><li><a href=https://54L1M.io/tags/configuration/>Configuration</a></li></ul><nav class=paginav><a class=prev href=https://54L1M.io/posts/vim/><span class=title>« Prev</span><br><span>Vim Navigation and Useful Commands Cheatsheet</span>
</a><a class=next href=https://54L1M.io/posts/grb/><span class=title>Next »</span><br><span>Estimating Photometric Redshifts of Galaxies and QSOs with Machine Learning</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Why Nix and nix-darwin Are Great for macOS on x" href="https://x.com/intent/tweet/?text=Why%20Nix%20and%20nix-darwin%20Are%20Great%20for%20macOS&amp;url=https%3a%2f%2f54L1M.io%2fposts%2fnix%2f&amp;hashtags=nix%2cnix-darwin%2cmacOS%2cdev-tools%2cunstable-branch%2cconfiguration"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Why Nix and nix-darwin Are Great for macOS on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2f54L1M.io%2fposts%2fnix%2f&amp;title=Why%20Nix%20and%20nix-darwin%20Are%20Great%20for%20macOS&amp;summary=Why%20Nix%20and%20nix-darwin%20Are%20Great%20for%20macOS&amp;source=https%3a%2f%2f54L1M.io%2fposts%2fnix%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Why Nix and nix-darwin Are Great for macOS on whatsapp" href="https://api.whatsapp.com/send?text=Why%20Nix%20and%20nix-darwin%20Are%20Great%20for%20macOS%20-%20https%3a%2f%2f54L1M.io%2fposts%2fnix%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Why Nix and nix-darwin Are Great for macOS on telegram" href="https://telegram.me/share/url?text=Why%20Nix%20and%20nix-darwin%20Are%20Great%20for%20macOS&amp;url=https%3a%2f%2f54L1M.io%2fposts%2fnix%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://54L1M.io/>54L1M</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>